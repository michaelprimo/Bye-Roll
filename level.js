

let checkpoint_id = 0;
let levelMap = [];

const TILE_SIZE = 32;
const SPRITE_SIZE = 16;

class Level 
{
  constructor(id_level,map_height,map_width,map_structure,player_spawnX,player_spawnY,checkpoint_list)
  {
    this.id_level = id_level;
    this.map_height = map_height;
    this.map_width = map_width;
    this.map_structure = map_structure;
    this.player_spawnX = player_spawnX;
    this.player_spawnY = player_spawnY;
    this.checkpoint_list = checkpoint_list;
  }
}

let level1 = new Level(0,15,20,[
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  11 ,171,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,
  11 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0 ,11 ,
  11 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,151,11 ,
  11 ,11 ,11 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,11 ,
  11 ,0  ,0  ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,0  ,0  ,11 ,
  11 ,141,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,11 ,11 ,
  11 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,11 ,11 ,0  ,11 ,
  11 ,0  ,0  ,11 ,0  ,11 ,11 ,11 ,11 ,11 ,11 ,0  ,0  ,0  ,11 ,
  11 ,11 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,131,0  ,11 ,
  11 ,0  ,11 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,11 ,
  11 ,0  ,0  ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,0  ,0  ,0  ,0  ,11 ,
  11 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,11 ,0  ,11 ,
  11 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,11 ,11 ,11 ,11 ,11 ,
  11 ,0  ,0  ,0  ,11 ,0  ,11 ,0  ,11 ,0  ,11 ,11 ,11 ,11 ,11 ,
  11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,11 ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
],64,480,true);

let level2 = new Level(1,15,20,[
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,171,21 ,21 ,
  21 ,25 ,25 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,25 ,21 ,
  21 ,25 ,25 ,0  ,0  ,151,0  ,0  ,0  ,0  ,0  ,0  ,0  ,25 ,21 ,
  21 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,24 ,21 ,21 ,21 ,21 ,24 ,21 ,
  21 ,0  ,0  ,21 ,25 ,21 ,25 ,25 ,0  ,0  ,0  ,0  ,0  ,0  ,21 ,
  21 ,141,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,24 ,0  ,131,0  ,21 ,
  21 ,21 ,21 ,0  ,0  ,0  ,0  ,0  ,0  ,24 ,0  ,24 ,0  ,0  ,21 ,
  21 ,21 ,24 ,21 ,21 ,24 ,24 ,21 ,21 ,0  ,0  ,0  ,0  ,0  ,21 ,
  21 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,25 ,21 ,
  21 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,24 ,21 ,
  21 ,0  ,21 ,21 ,21 ,21 ,21 ,21 ,0  ,0  ,0  ,0  ,0  ,24 ,21 ,
  21 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,24 ,0  ,0  ,0  ,0  ,25 ,21 ,
  21 ,0  ,25 ,25 ,25 ,0  ,0  ,0  ,25 ,21 ,25 ,0  ,25 ,25 ,21 ,
  21 ,82 ,82 ,82 ,82 ,82 ,82 ,82 ,82 ,81 ,24 ,0  ,24 ,25 ,21 ,
  21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,21 ,71 ,21 ,21 ,21 ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
],420,500,true);

let level3 = new Level(2,15,20,[
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  31 ,31 ,171,31 ,31 ,31 ,31 ,31 ,31 ,31 ,31 ,31 ,31 ,31 ,31 ,
  31 ,0  ,0  ,35 ,0  ,0  ,0  ,111,0  ,0  ,0  ,0  ,0  ,0  ,31 ,
  31 ,31 ,0  ,0  ,0  ,0  ,0  ,111,0  ,0  ,151,0  ,0  ,0  ,31 ,
  31 ,0  ,31 ,31 ,0  ,0  ,0  ,111,0  ,0  ,0  ,0  ,0  ,0  ,31 ,
  31 ,0  ,131,0  ,31 ,31 ,31 ,82 ,31 ,31 ,31 ,0  ,0  ,0  ,31 ,
  31 ,0  ,0  ,0  ,111,111,111,111,111,111,111,0  ,0  ,0  ,31 ,
  31 ,0  ,0  ,35 ,35 ,35 ,31 ,0  ,0  ,0  ,0  ,31 ,0  ,0  ,31 ,
  31 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,141,0  ,0  ,111,0  ,31 ,31 ,
  31 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,31 ,0  ,0  ,111,31 ,0  ,31 ,
  31 ,0  ,0  ,0  ,0  ,0  ,0  ,31 ,111,31 ,31 ,31 ,31 ,81 ,31 ,
  31 ,31 ,31 ,31 ,31 ,31 ,0  ,0  ,0  ,111,111,111,111,111 ,31 ,
  31 ,35 ,35 ,35 ,35 ,35 ,31 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,31 ,
  31 ,35 ,35 ,35 ,35 ,35 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,31 ,
  31 ,81 ,0  ,0  ,0  ,0  ,0  ,0  ,31 ,31 ,82 ,82 ,0  ,0 ,31 ,
  31 ,31 ,31 ,31 ,31 ,31 ,31 ,71 ,31 ,31 ,31 ,31 ,31 ,31 ,31 ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
],230,500,false);


let level4 = new Level(3,15,20,[
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  41 ,171,41 ,41 ,41 ,41 ,41 ,41 ,41 ,41 ,41 ,41 ,41 ,41 ,41 ,
  41 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,82 ,0  ,0  ,0  ,41 ,
  41 ,91 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,41 ,
  41 ,0  ,91 ,91 ,91 ,91 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,151,41 ,
  41 ,41 ,41 ,41, 82 ,41 ,41 ,41 ,41 ,41 ,44 ,0  ,0  ,0  ,41 ,
  41 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,91 ,91 ,41 ,
  41 ,141,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,91 ,91 ,41 ,
  41 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,91 ,0  ,0  ,41 ,
  41 ,41 ,41 ,91 ,44 ,91 ,91 ,0  ,91 ,0  ,0  ,0  ,0  ,0  ,41 ,
  41 ,81 ,81 ,81 ,41 ,91 ,91 ,0  ,0  ,0  ,0  ,82 ,0  ,0  ,41 ,
  41 ,0  ,131,0  ,41 ,91 ,91 ,91 ,0  ,91 ,91 ,91 ,91 ,91 ,41 ,
  41 ,0  ,0  ,0  ,41 ,91 ,91 ,0  ,0  ,91 ,45 ,45 ,45 ,45 ,41 ,
  41 ,0  ,0  ,0  ,44 ,0  ,0  ,0  ,91 ,45 ,45 ,45 ,45 ,41 ,41 ,
  41 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,81 ,41 ,
  41 ,41 ,41 ,41 ,41 ,41 ,41 ,71 ,41 ,41 ,41 ,41 ,41 ,41 ,41 ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
],230,500);


let level5 = new Level(4,15,20,[
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  51 ,51 ,51 ,51 ,51 ,51 ,51 ,51 ,51 ,51 ,171,51 ,51 ,51 ,51 ,
  51 ,0  ,141,0  ,111,0  ,0  ,0  ,111,0 ,111,0  ,0  ,82 ,51 ,
  51 ,0  ,0  ,0  ,111,131,0  ,0  ,111,0 ,51 ,0  ,0  ,51 ,51 ,
  51 ,0  ,0  ,0  ,111,0  ,0  ,0  ,111,0 ,0  ,0  ,0  ,0  ,51 ,
  51 ,0  ,0  ,0  ,111,0  ,0  ,82 ,51 ,111,111,0 ,151,0  ,51 ,
  51 ,91 ,111,111,111,51 ,91 ,51 ,51 ,51 ,51 ,51 ,0  ,0  ,51 ,
  51 ,91 ,111,111,111,51 ,55 ,55 ,55 ,55 ,0  ,0  ,0  ,51 ,51 ,
  51 ,0  ,0  ,91 ,91 ,0  ,0  ,0  ,0  ,0  ,51 ,51 ,0  ,0  ,51 ,
  51 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,51 ,0  ,51 ,
  51 ,91 ,91 ,0  ,0  ,54 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,51 ,
  51 ,0  ,0  ,0  ,0  ,54 ,0  ,0  ,91 ,54 ,0  ,0  ,0  ,0  ,51 ,
  51 ,55 ,55 ,91 ,91 ,54 ,0  ,0  ,0  ,54 ,0  ,0  ,0  ,0  ,51 ,
  51 ,55 ,55 ,55 ,55 ,54 ,91 ,0  ,91 ,54 ,91 ,0  ,0  ,0  ,51 ,
  51 ,91 ,91 ,55 ,55 ,81 ,0  ,0  ,0  ,81 ,0  ,0  ,0  ,81 ,51 ,
  51 ,51 ,51 ,51 ,51 ,51 ,51 ,71 ,51 ,51 ,51 ,51 ,51 ,51 ,51 ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
],230,500);


let level6 =  new Level(5,15,20,[
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
],50,450);

let levelEmpty8 = new Level(999,20,15,[
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,61 ,
  61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,61 ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
  0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,0  ,
],50,450);


let levelManager = 
[
  level1,level2,level3,level4,level5,level6
];
ctx.fillStyle='red';
ctx.font = "40px Tahoma";

// MAP EDITOR
function createMap()
{
  for(let column = 0; column < levelManager[scene_manager.curLevel].map_width; column++)
  {
    for(let row = 0; row < levelManager[scene_manager.curLevel].map_height; row++)
    {
      levelMap_create(column, row);
      
    }
  }
}

function levelMap_create(column, row)
{
  let hitboxWidth = 24;
  let hitboxHeight = 24;
  let map_x = (row*TILE_SIZE)+((TILE_SIZE-hitboxWidth)/2);
  let map_y = (column*TILE_SIZE)+((TILE_SIZE-hitboxHeight)/2);
  
  

  if(die_roll == 2)
  {
    map_x = ((levelManager[scene_manager.curLevel].map_height*TILE_SIZE)-(TILE_SIZE-hitboxWidth)-hitboxWidth)-(row*TILE_SIZE)+((TILE_SIZE-hitboxWidth)/2);
  }

  

  let isSolid = true;
  let isVisible = true;
  let type_id = levelManager[scene_manager.curLevel].map_structure[(column*levelManager[scene_manager.curLevel].map_height)+row];
  let d100_roll = Math.floor(Math.random() * 100) + 1;
  let lastDigit2Str = String(type_id).slice(0, length-1);
  type_id = Number(lastDigit2Str); 
  let mode_id = levelManager[scene_manager.curLevel].map_structure[(column*levelManager[scene_manager.curLevel].map_height)+row];
  
  lastDigit2Str = String(mode_id).slice(-1); 
  mode_id = Number(lastDigit2Str);
  
  let frame_id = (type_id*3)+3;
  let idleMovement = [frame_id,frame_id+1,frame_id+2,frame_id+1];

  if(levelManager[scene_manager.curLevel].map_structure[(column*levelManager[scene_manager.curLevel].map_height)+row] != 0)
  {
    d100_roll = Math.floor(Math.random() * 100) + 1;
    if(type_id == 8 && die_roll == 5)
    {
      frame_id = (type_id*3)+18;
      idleMovement = [frame_id,frame_id+1,frame_id+2,frame_id+1];
    }
   

    if(mode_id == 2 && die_roll == 4)
    {
      isSolid = false;
      isVisible = false;
      map_x -= 1000;
    }
    if(mode_id == 3 && die_roll != 4)
    {
      isSolid = false;
      isVisible = false;
    }
    if(mode_id == 4 && die_roll == 3 && d100_roll > 50)
    {
      isSolid = false;
      isVisible = false;
    }
    else if(mode_id == 4 && die_roll == 3 && d100_roll <= 50)
    {
      isSolid = true;
      isVisible = true;
    }
    else if(mode_id == 4 && die_roll == 5)
    {
      isSolid = false;
      frame_id = 6;
      idleMovement = [frame_id,frame_id+1,frame_id+2,frame_id+1];
    }
    
    if((mode_id == 5 && die_roll != 3) || (mode_id == 5 && die_roll == 3 && d100_roll <= 50))
    {
      isSolid = false;
      isVisible = false;
    }

    for(let j = 0; j < 3; j++)
    {
      if(type_id == 13+j && playerCharacter.checkpoint_last_id[j] == false)
      {
        isSolid = false;
        isVisible = true;
        if(die_roll == 5)
        {
          frame_id = (8*3)+3;
          idleMovement = [frame_id,frame_id+1,frame_id+2,frame_id+1]; 
        }
        else
        {
          frame_id = (type_id*3)+3*(14-type_id);
          idleMovement = [frame_id,frame_id+1,frame_id+2,frame_id+1];
        }
        
      }
      if(type_id == 13+j && playerCharacter.checkpoint_last_id[j] == true)
      {
        /*
        isSolid = false;
        frame_id = (type_id*3)+3*(16-type_id);
        idleMovement = [frame_id,frame_id+1,frame_id+2,frame_id+1];
        */
        isSolid = false;
       isVisible = false;
      }

      if(type_id == 17)
      {
        frame_id = ((scene_manager.curLevel+1)*3)+3;
        idleMovement = [frame_id,frame_id+1,frame_id+2,frame_id+1];
      }
      


      
    }
    
    levelMap.push(new Platform(map_x,map_y,
    hitboxWidth,hitboxHeight,
    TILE_SIZE,TILE_SIZE,
     isSolid, isVisible, 
     type_id, mode_id, idleMovement),
     
     );
     
    //console.log("column: " + column + " row: " + row + " x: " + map_x + "" + " y: " + map_y);
      
  }
  for(let j = 0; j<HUDSprites.length;j++)
  {
    if(playerCharacter.checkpoint_last_id[j] == false)
    {
      HUDSprites[j].idleMovement=[48,49,50,49];
    }
  }
}

function die_mode_level()
{
  levelMap.length = 0;
  createMap();
}